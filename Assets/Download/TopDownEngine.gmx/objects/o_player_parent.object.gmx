<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_entity</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>500</depth>
  <persistent>0</persistent>
  <parentName>o_entity_parent</parentName>
  <maskName>mask_entity</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>initialize</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>gox = x;
goy = y;
move_c = 0;
move_c_sp = 9;

move = 0;
pdir = 0;
fire_c = 0;
legs_color = c_gray;
body_color = c_dkgray;
head_color = 6665876;
top_ind = 1;
spotlight = false;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>weapons</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>w = 0;
w_max = 1;
can_shoot = 1;

at_on = false;

weapon[0,0] = "AK-47";
weapon[0,1] =  "Rifle";
weapon[0,2] = "A";
weapon[0,3] = 6; //attack speed
weapon[0,4] = 2; //accuracy
weapon[0,5] = 30; //damage
weapon[0,6] = 0 //attachment
weapon[0,7] = 30 //mag ammo
weapon[0,8] = 30 //mag ammo
weapon[0,9] = 90 //mag ammo
weapon[0,10] = sound_weapon_ak_shoot;
weapon[0,11] = sound_weapon_ak_reload;
weapon[0,12] = spr_top_weapon_ak;
weapon[0,13] = spr_w_ak47;
weapon[0,14] = 0;
weapon[0,15] = 0;

weapon[1,0] = "No Weapon";
weapon[1,1] =  "Rifle";
weapon[1,2] = "A";
weapon[1,3] = 6; //attack speed
weapon[1,4] = 2; //accuracy
weapon[1,5] = 30; //damage
weapon[1,6] = 0; //attachment
weapon[1,7] = 30 //mag ammo
weapon[1,8] = 30 //mag ammo
weapon[1,9] = 90 //mag ammo
weapon[1,10] = sound_weapon_ak_shoot;
weapon[1,11] = sound_weapon_ak_reload;
weapon[1,12] = spr_top_weapon_ak;
weapon[1,13] = 0;
weapon[1,14] = 0;
weapon[1,15] = 0;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>612</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_variable</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>1</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>801</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_set_cursor</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>5</kind>
            <sprite>spr_cursor</sprite>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>can_shoot</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>1</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>404</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_number</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>10</kind>
            <object>obj_lighting</object>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>2</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_blend_mode(bm_subtract);
surface_set_target(obj_lighting.light);
{
if spotlight
draw_sprite_ext(spr_light_gradient_flashlight,1,(x-view_xview),(y-view_yview),1,1,pdir,c_white,1)
}

surface_reset_target();
draw_set_blend_mode(bm_normal);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>basic player movement</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>key_left = keyboard_check(ord("A"));
key_right = keyboard_check(ord("D"));
key_up = keyboard_check(ord("W"));
key_down = keyboard_check(ord("S"));
//if position_meeting(x,y,obj_water)
//sp = 0.9;
//else
sp = 3;

var move;
move = abs(key_left + key_right + key_up + key_down);

if key_left
{gox = x-(sp+.5);}
if key_right
{gox = x+(sp+.5);}
if key_down
{goy = y+(sp+.5);}
if key_up
{goy = y-(sp+.5);}
if move
move_towards_point(gox,goy,sp);
else
friction = 0.2;
//move_c
if !(move = 0)
{if move_c &lt; 360
move_c += move_c_sp
else
move_c = 0}
else
{move_c = 0}

if fire_c &gt; 0
fire_c -= 0.2;

pdir = point_direction(x,y,mouse_x,mouse_y);

scr_step_player_sound();
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>shooting</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///weapon management
if mouse_wheel_down() and w &lt; w_max
{w += 1
sound_play(sound_weapon_change)
at_on = false;
}
if mouse_wheel_up() and w &gt; 0
{w -= 1
sound_play(sound_weapon_change)
at_on = false;
}

if !(weapon[w,0] = "No Weapon")
{
if can_shoot
{
if (mouse_check_button(mb_left) and weapon[w,2] = "A")
or (mouse_check_button_pressed(mb_left) and weapon[w,2] = "SA")
{
//player has ammo in magazine
if weapon[w,7] &gt; 0
{
can_shoot = false;
sound_play(weapon[w,10]);
alarm[0] = weapon[w,3]
weapon[w,7] -= 1;
fire_c = 1;
with instance_create(x,y,o_bullet)
{move_towards_point(mouse_x,mouse_y,BULLET_SPEED)
direction += random(other.weapon[other.w,4])*choose(1,-1)
damage = other.weapon[other.w,5]
image_angle = direction;
//b_id = other.pl_id;
}
}

//player has either no reload amunition or no ammo in magazine
if weapon[w,9] &lt;= 0  and weapon[w,7] &lt;= 0
{
can_shoot = false;
sound_play(sound_weapon_dry);
alarm[0] = choose(12,14,16);
}
}

//player does have reload amunition but no ammo in magazine
if weapon[w,9] &gt; 0  and ((weapon[w,7] &lt;= 0 and mouse_check_button(mb_left)) or keyboard_check_pressed(ord("R")))
{
can_shoot = false;
sound_play(weapon[w,11]);

if weapon[w,1] =  "Rifle"
alarm[0] = 90;
else if weapon[w,1] =  "SMG" or weapon[w,1] =  "Pistol"
alarm[0] = 65;
else if weapon[w,1] =  "MG"
alarm[0] = 125;

var ammo_add;
ammo_add = min(weapon[w,8]-weapon[w,7],weapon[w,9])
weapon[w,7] += ammo_add;
weapon[w,9] -= ammo_add;
}
}
top_ind = 1;
}
else
{
//knife
if can_shoot
{
if mouse_check_button_pressed(mb_left)
{
sound_play(sound_draw_knife);
alarm[0] = 15;
fire_c = 1;
can_shoot = 0;
}
}
top_ind = 2;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>turn on/off weapon attachment</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if mouse_check_button_pressed(mb_right)
{
if !(weapon[w,0] = "No Weapon") and weapon[w,6] &gt; 0
{at_on = !at_on;
sound_play(sound_zoom)
}
}

if weapon[w,6] = 1 and !(weapon[w,0] = "No Weapon") and at_on
spotlight = true
else
spotlight = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="o_wall">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>{/// Collision

    x = xprevious;
    y = yprevious;
        
    if ( !place_meeting(x+hspeed,y,other) ) {
        x += hspeed;
    } else {
        if ( !place_meeting(x,y+vspeed,other) ) {
            y += vspeed;    
        }
    }}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>spr = spr_entity;
sprt = spr_top_player;
sprw = weapon[w,12];

r = pdir-90;
b_c = sin(degtorad(move_c));
h_l = 8;
t_l = 5;
b_r = sin(degtorad(move_c))*9;
l_l = 5;
f_l = 8;
rt = pdir;
if top_ind = 1 then re_c = 1 else re_c = 0;

draw_sprite_ext(spr,10,x+lengthdir_x(f_l*b_c*(-1),r-90),y+lengthdir_y(f_l*b_c*(-1),r-90),1,1,r+b_r/5*(-1),legs_color,1);
draw_sprite_ext(spr,9,x+lengthdir_x(f_l*b_c*(-1),r+90),y+lengthdir_y(f_l*b_c*(-1),r+90),1,1,r+b_r/5*(-1),legs_color,1);
draw_sprite_ext(spr,8,x+lengthdir_x(l_l*b_c*(-1),r-90),y+lengthdir_y(l_l*b_c*(-1),r-90),1,1,r+b_r/3*(-1),legs_color,1);
draw_sprite_ext(spr,7,x+lengthdir_x(l_l*b_c*(-1),r+90),y+lengthdir_y(l_l*b_c*(-1),r+90),1,1,r+b_r/3*(-1),legs_color,1);

draw_sprite_ext(sprt,top_ind,x+lengthdir_x(-fire_c*3*re_c,rt),y+lengthdir_y(-fire_c*3*re_c,rt),1,1,rt-10*fire_c*(1-re_c),body_color,1);
draw_sprite_ext(sprt,0,x+lengthdir_x(-fire_c*1.5,rt),y+lengthdir_y(-fire_c*1.5,rt),1,1,rt,head_color,1);
draw_sprite_ext(sprw,0,x+lengthdir_x(-fire_c*3,rt),y+lengthdir_y(-fire_c*3,rt),1,1,rt,c_white,re_c);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="13">
      <action>
        <libid>1</libid>
        <id>331</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_restart_game</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
